<!doctype html>
<html>
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>html5 Uploader</title>
		<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
		<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/css/bootstrap-theme.min.css" rel="stylesheet">
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
		<link href="html5-holder-example.css" rel="stylesheet">
		<script src="//code.jquery.com/jquery-1.11.2.min.js"></script>
		<script src="//code.jquery.com/jquery-migrate-1.2.1.min.js"></script>
		<script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
		<script src="html5-uploader.js"></script>
	</head>
	<body>
		<div class="container">
			<div class="row">
				<div class="col-md-10 col-md-offset-1">
					<h1>html5 Uploader</h1>
					<p class="lead">
						Enter the file you wish to upload below
					</p>
					<form role="form">
						<div class="form-group">
							<label for="file" class="sr-only">File</label>
							<input type="file" id="file" name="file" data-url="upload.php" data-holder=".form-control-holder" data-progress="customProgress" class="form-control">
							<p class="help-block">
								<div class="form-control-holder text-center text-muted">
									Drag and drop your file here.
								</div>
								<div class="progress">
									<div class="progress-bar form-control-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width:0%;">
										<span class="sr-only">0%</span>
									</div>
								</div>
							</p>
						</div>
						<div class="form-group">
							<label class="sr-only">File Preview</label>
							<div class="form-control-static" style="width:150px;">
								<img src="//placehold.it/100x100" class="img-responsive img-thumbnail form-control-preview">
							</div>
						</div>
					</form>
				</div>
			</div>
		</div>
		<script>
		// Custom attributes
		var customProgress = function(complete)
			{
				// Lovely visual...
				if ($('.progress .progress-bar').attr('aria-valuenow') != complete) {
					$('.progress .progress-bar').css('width', complete+'%').attr('aria-valuenow', complete);
					$('.form-control-progress .sr-only').text(complete);
				}
			};
		// Load when ready...
		$(function()
		{
			$('input[type=file]').html5uploader({
				//url: 'upload.php',
				//holder: '.form-control-holder',
				fields: {
					type: 'image'
				},
				/*progress: function(complete)
				{
					if ($('.progress .progress-bar').attr('aria-valuenow') != complete) {
						$('.progress .progress-bar').css('width', complete+'%').attr('aria-valuenow', complete);
						$('.form-control-progress .sr-only').text(complete);
					}
				},*/
				preview: function(file)
				{
					// Append file to our ready and willing img placeholder
					$('.form-control-preview').attr('src', file);
				},
				complete: function(file, response)
				{
					// Success!
					console.log('completed', file, response);
				}
			});
		});
		</script>
	</body>
</html>